# 교착상태 (Deadlock)

---



#### 두 개 이상의 작업이 서로 상대방의 작업이 끝나기 만을 기다리고 있기 때문에 결과적으로 아무것도 완료되지 못하는 상태



프로세스 정상적인 작동 모드
요청 사용방출
3가지의 순서로 맞춰서 작동이 되어야 한다

---

 ### 교착상태의 특징

- **상호 배제 (Mutual exclusion)** - 최소한 하나의 자원이 비공유 모드로 점유
- **점유하며 대기 (Hold and wait)** - 최소한 하나의 자원을 점유한채, 다른 프로세스에 의해 점유된 자원을 추가로 얻기 위해 대기
- **비선점 (No preemption)** - 자원들을 선점할 수 없어야 한다.
-  **순환 대기 (Circular wait)** 
  **시스템 자원할당 그래프** **사이클**이 존재하면 교착상태가 발생

![1571960433035](C:\Users\gyu\AppData\Roaming\Typora\typora-user-images\1571960433035.png)

---

#### 교착상태를 갖는 자원 할당 그래프 - 교착상태 처리 방법 (3가지)

1. 교착 상태를 예방하거나 회피하는 프로토콜을 사용

2. 교착상태가 되도록 허용한 다음에 회복시키는 방법이 존재

3. **문제를 무시하고 교착상태가 시스템에서 결코 발생하지 않는척 한다**.

   

   3번째 방법은 UNIX, Windows를 포함해 대부분의 운영체제가 사용하는 방법

   왜 3번째 방법을 사용하는지 그 이유는 ? 

   ```
   현재 교착상태는 매우 드물게 발생하기때문에 교착상태를 예방, 회피, 탐지 복구 방법 수행하는 것보다 문제를 무시하는게 더 적은 비용을 발생하기 때문에
   ```

   

---

### 교착 상태 예방

교착상태 조건인 1.상호배제, 2.점유하며 대기, 3.비선점, 4.순환대기  4가지중 하나를 성립시키지않게 하여 교착 상태를 예방시키는것이다. 

1. **상호배제**
   	**여러 개의 프로세스가 공유 자원을 사용할 수 있도록 한다.**
       읽기전용파일이 공유 가능한 자원의 좋은 예만약 여러 프로세스가 읽기 전용의 파일을 열면, 그 파일에 동시 접근을 **허용**하기 때문에 프로세스는 공유 가능한 자원을 위해 대기할 필요가 없어 **상호배제** 조건을 거부



2. **점유하며 대기**
   **프로세스가 실행되기 전 필요한 모든 자원을 할당한다.**
   단점 존재 오랜 시간 동안 사용되지 않기 때문에 자원 이용도가 낮음기아 상태가 발생할 수 있음

3. **비선점**
   **자원을 점유하고 있는 프로세스가 다른 자원을 요구할 때 점유하고 있는 자원을 반납하고, 요구한 자원을 사용하기 위해 기다리게 한다.**

4. **순환대기**
   **자원에 고유한 번호를 할당하고, 번호 순서대로 자원을 요구하도록 한다.**

---

### **교착상태 회피**

 **교착상태 예방**을하면 장치의 **이용률이 저하, 시스템처리율**이 감소하는 단점을 가지고 있음

![1571960507326](C:\Users\gyu\AppData\Roaming\Typora\typora-user-images\1571960507326.png)

### **은행원 알고리즘**

(은행에 적용하면 고객들이 현금을 찾으러 와도 일정한 순서에 의해 모든 고객의 요청 처리)
특징 다익스트라가 제안한 기법불안전상태와 안전 상태로 구분안전 상태에서는 교착상태가 발생하지 않는다.지원의 양은 일정사용자의 수는 일정

**프로세스가 시작할 때 프로세스가 가지고 있어야할 자원의 최대 갯수를 자원 종류마다 미리 신고**

```
이부분은 따로 동영상강의를 들으시는게 더 이해가 빠릅니다.

http://www.kocw.net/home/search/kemView.do?kemId=1046323
이화여대 이 교수님꺼 들었습니다.
```






### **교착 상태 탐지**───────────────────────────────────

만약 시스템이 교착상태예방이나 교착상태 방지 알고리즘을 사용하지 않으면, 교착상태가 발생할수 있음.

이러한 환경에서는 시스템은 다음 알고리즘들을 반드시 지원해야한다.

교착 상태가 발생했는지 결정하기 위해 시스템의 상태를 검사하는 알고리즘교착 상태로부터 회복하는 알고리즘