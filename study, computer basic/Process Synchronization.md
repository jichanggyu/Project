# Process Synchronization

Processes can be executed in parallel.



however, Parallel behavior can cause problems with the integrity.



so, there are 3 solution to the integrity problem.





### Critical Section

---

동일한 자원을 동시에 접근하는 작업을 실행하는 코드 영역을 의미한다.



![1572068360593](C:\Users\gyu\AppData\Roaming\Typora\typora-user-images\1572068360593.png)



하나의 프로세스만이 임계영역을 실행하도록 보장시키는 것 



임계 영역 문제 해결을 위한 기본 조건 

1. 상호 배제 : 어떤 프로세스가 자신의 임계 영역 내에서 실행 중일때 다른 프로세스는 진입 금지 시킴
2. 진행 : 임계 영역에서 실행중인 프로세스가 없다면, 임계 영역으로 진입하려는 프로세스들 중 하나는 진입 O
3. 한정된 대기 : 임계 영역에 대한 진입 요청 후 무한히 기다리지 않음.

---

---



## 동기화의 기본적인 해결 방법

  동기화 문제에 대한 가장 기본적인 해결 방법은 Lock이다. 특정 프로세스가 공유 자원에 접근 중일때는 다른 프로세스는 접근을 하지 못하도록 Lock을 걸어 해결함



1. 임계 영역 진입 부분을 안전하게 처리
   - 임계 영역으로의 진입 가능성 확인과 진입을 원자적으로 처리
   - 경쟁 조건이 발생하더라도 안전하게 처리
2. Lock 변수에 공동으로 접근하면 똑같이 임계 영역 진입에 대한 문제가 발생



---

### 세마포어

- 프로세스의 동기화 기법으로 공유된 자원의 여러 프로세스가 동시에 접근하는 걸 막음



wait이랑 Signal로 Lock을 획득 시키거나 Lock을 해제시킴

```
wait(S) : lock 획득
Signal(S) : lock 해제
```



하지만 세마포어의 문제점이 생김 

 프로세스가 비었을때 계속 프로세스를 살피는 반복문이 실행되는데 여기서 context switching이 일어남 즉 overhead가 증가..

 

위 문제점을 해결하기 위해 2가지 방법으로 해결함

1. 프로세스가 lock을 기다리는 동안 계속 순환(spin) 을 실행됨 -- spin lock이라고 생각하면 될듯
2. block()을 통해서 프로세스를 대기 사앹로 전환시키고 cpu 스케줄링 실행시키면됨



---

### 뮤텍스

- 스레드의 동기화 기법으로 공유된 자원의 여러 스레드가 동시에 접근하는 것을 막는 것.



1. 기아 - 무한대기
   - 프로세스가 세마포어 큐에서 무한히 대기하는 상황
   - 높은 우선순위의 프로세스가 계속 들어오면 무한히 대기만 하는 상황
   - 시간이 지날 수록 우선순위를 높여주는 방법으로 해결
2. 우선순위 역전
   - 공유 자원에 대한 허가를 기다리는 동안 낮은 우선순위 프로세스와 스케줄링 순서가 뒤바뀌는 상황



---

여기서 중요한 점은 뮤텍스와 세마포어를 정확하게 차이점을 알고 있는게 중요하다고 생각함





