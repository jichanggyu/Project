# Operating System



 OS : 컴퓨터 시스템을 관리하는 시스템 소프트웨어로 컴퓨터의 CPU, 메모리 및 주변 장치를 관리하여 응용 프로그램이 동작할 수 있는 환경을 제공



1. 성능 평가 기준

   a. 처리 능력

   b. 반환 시간

   c. 사용 가능도

   d. 신뢰도

2. 기능

   a. 프로세스를 관리한다. (프로세스 생성과 제거, 중지 및 재수행 등)

   b. 프로세서, 기억장치, 입출력장치 등의 자원 관리

   c. 자원의 스케줄링 ㅇ기능 제공

   d. 사용자와 시스템 간의 편리한 인터페이스 제공

   e. 시스템의 각종 하드웨어 네트워크 관리,제어

   f. 시스템의 오류 검사 및 복구, 데이터 관리, 데이터 및 자원 

3. 종류

   a. windows, MS-DOS, UNIX, Linux

시스템 소프트웨어 : 응용 소프트웨어를 실행하기 위한 환경을 제공하고 컴퓨터 시스템을 동작시키는 소프트웨어이다.

- 운영체제, 장치 드라이버, 컴파일러, 어셈블러, 링커, 라이브러리 등이 있습니다.

---

 #### 운영체제 운용 기법

1. 일괄 처리 ( Batch Processing, 1세대 )
   - 일정 기간 또는 일정량의 데이터를 모아서 한꺼번에 처리하는 방식이다.
   - 효율이 높다.
   - 시스템 자원을 독점하여 CPU 유휴 시간이 줄어든다.
   - 사용자 측면에서는 처리량이 많아 반환 시간이 늦다.
2. 다중 프로그래밍(Multi Programming, 2세대 )
   - 하나의 CPU와 주기억장치를 이용하여 여러 개의 프로그램을 동시에 처리하는 방식이다.
   - 하나의 주기억장치에 2개 이상의 프로그램을 기억시켜 놓고, 하나의 CPU와 대화하면서 처리하는 방식이다.
3. 시분할 ( Time Sharing, 2세대 )
   - 여러 개의 CPU와 하나의 주기억장치를 이용하여 여러 개의 프로그램을 동시에 처리하는 방식이다.
   - 하나의 CPU가 고장나더라도 다른 CPU를 이용하여 업무를 처리할 수 있으므로 시스템의 신뢰성과 안전성이 높다.
4. 다중 처리 (Multi Processing, 2세대)
   - 여러 개의 CPU와 하나의 주기억장치를 이용하여 여러 개의 프로그램을 동시에 처리하는 방식이다.
   - 하나의 CPU가 고장나더라도 다른 CPU를 이용하여 업무를 처리할 수 있으므로 시스템의 신뢰성과 안전성이 높다.
5. 실시간 처리 (Real Time, 2세대 )
   - 데이터 발생 즉시 처리하여 결과를 산출하는 방식이다.
   - 처리 시간이 짧고 처리 비용이 낮다.
   - 자동 항법 장치나 전화 교환장치 제어등에 사용된다.
6. 다중 모드 (multi mode, 3세대 )
   - 일괄 처리 시스템, 시분할 시스템, 다중 처리 시스템, 실시간 처리 시스템을 한 시스템에서 모두 제공하는 방식이다.
7. 분산 처리(Distributed Processing, 4세대 )
   - 여러 개의 컴퓨터(프로세스)를 통신 회선으로 연결하여 하나의 작업을 처리하는 방식
   - 각 단말장치나 컴퓨터 시스템은 고유의 운영체제와 cpu, 메모리를 가지고 있다.

---

#### Linker / Loader

링커 : 컴파일러에 의해 번역된 목적 프로그램과 라이브러리 등을 연결하여 실행 가능한 로드 모듈을 만드는 시스템 소프트웨어



로더 : 보조기억장치로부터 주기억장치에 적재하는 시스템 소프트웨어이다.

1. 기능
   - 할당
   - 연결
   - 재배치
   - 적재
2. 종류
   - compile and go 로더
   - 절대로더
   - 직접 연결 로더
   - 동적 적재 로더

---

#### 프로세스

프로세스의 정의

- 실행 중인 프로그램
- 프로세서가 할당되는 실체, 프로시저가 활동중인 것
- 운영체제가 관리하는 실행 단위
- 비동기적 행위를 일으키는 주체
- PCB를 가진 프로그램

장점

- 병렬 환경에서 데이터가 안전하다

단점

- 자원 소모가 크다
- 문맥 교환이 느리다.
- 자원 공유를 위해 특별한 작업 처리해야 한다.



프로세스는 부모 프로세스와 자원을 공유하지 않는다.

자식 프로세스는 생성될때 부모 프로세스의 text 영역을 제외한 stack, heap, data 영역의 값들을 모두 복사



##### PCB

운영체제가 프로세스에 대한 중요한 정보를 저장해 놓는 곳

- 각 프로세스가 생성될 때마다 고유의 PCB가 생성되고, 프로세스가 완료 되면 PCB가 제거된다.
- PCB에 저장되어 있는 정보
  - 프로세스의 현재 상태
  - 포인터
  - 프로세스 고유 식별자 PID
  - 스케줄링 및 프로세스의 우선순위
  - CPU 레지스터 정보 ( 누산기, 인덱스 레지스터, 프로그램 카운터 )
  - 주기억장치 관리 정보

---

#### Thread

쓰레드의 정의

- 하나의 프로세스 내에서 병행성을 증대시키기 위한 메커니즘으로 시스템의 자원을 할당받아 실행하는 프로그램의 단위
- 독립적인 스케줄링의 최소 단위, 동일 프로세스 환경에서 서로 독립적인 다중 수행이 가능
- 하나 이상의 스레드가 존재할 경우 다중 스레드라고 한다.
- 프로세스의 일부 특성을 갖고 있기 때문에 경량 프로세스라고도 한다.
- 스레드는 독립된 제어 흐름을 가지며, 고유의 레지스터와 스택을 사용한다.

쓰레드의 장점

- 하나의 프로세스를 여러 개의 스레드로 생성하여 병행성을 증진시킬 수 있다.
- 응답 시간을 단축시킬 수 있다.
- 실행 환경을 공유시켜 기억장소 및 자원의 낭비가 줄어든다.
- 공통적으로 접근 가능핝 기억장치를 통해 효율적으로 통신한다.

쓰레드는 stack으로 만들어져 heap data text부분은 똑같이 공유하기 때문에 문맥교환이 필요가 없음



---



#### 스케줄링

프로세스가 생성되어 실행될 때 필요한 시스템의 여러 자원을 해당 프로세스에게 할당하는 작업이다.

- 문맥 교환 작업을 통해 프로세스는 이전에 수행했던 상태에서 수행할 수 있다.

목적

- CPU 사용 효율을 높게 스케줄링한다.
- 우선 순위가 높은 프로세스를 먼저 수행하고 처리한다.
- 문맥 교환에 들어가는 오버헤드를 최소화한다.
- 작업을 요청했을 때 반응하는 응답 시간을 최소화한다.
- 프로세스를 시작하여 실행을 완료하는 데 걸리는 반환 시간을 최소화 한다.
- 무한정 대기하는 작업이 발생하지 않게 한다.

##### 문맥교환 

새로운 프로세스에게 CPU를 할당하기 위해 현재 CPU가 할당된 프로세스의 상태 정보를 저장하고, 새로운 프로세스의 상태 정보를 설정한 후 CPU를 할당하여 실행되도록 하는 작업이다. 운영체제의 overhead의 주 원인



---

#### 프로세서 스케줄링의 종류

1. 비선점 스케줄링

   - 정의 : 이미 할당된 CPU를 다른 프로세스가 강제로 빼앗아 사용할 수 없는 스케줄링 기법
   - 프로세스가 CPU를 할당 받으면 해당 프로세스가 완료 될 때까지 CPU를 사용한다.
   - 일괄 처리 방식의 스케줄링이다.
   - 종류
     - FCFS : 큐에 도착한 순서에 따라 CPU를 할당하는 기법
     - SJF : 실행시간이 가장 짧은 프로세스에 먼저 CPU를 할당하는 기법
     - HRN : 우선순위 계산 결과 값이 높은 것부터 우선순위가 할당되는 기법
     - 우선순위 : 우선 순위가 높은 작업이 먼저 CPU를 사용한다.

2. 선점 스케줄링

   - 정의 : 하나의 프로세스가 CPU를 할당 받아 실행하고 있을 때 우선순위가 높은 다른 프로세스가 CPU를 강제로 빼앗아 사용할 수 있는 스케줄링 기법
   - 선점으로 인한 많은 오버헤드가 발생
   - 시분할 시스템에 사용하는 스케줄링이다.
   - 선점을 위해 시간 배당을 위한 인터럽트용 타이머 클럭이 필요하다.
   - 종류
     - SRT : 현재 실행 중인 프로세스의 남은 시간과 대기 큐에 프로세스의 실행 시간이 가장 짧은 프로세스가 CPU를 사용한다.
     - 선점 우선순위
     - RR : 대기 큐를 사용하여 먼저 대기한 작업이 먼저 CPU를 사용한다. CPU를 사용할 수 있는 시간 동안 CPU를 사용한 후에 다시 대기 큐에 배치하여 대기한다. 할당되는 시간이 작을수록 문맥 교환 및 오버헤드가 자주 발생된다
     - 다단계 큐 : 프로세스를 특정 그룹으로 분류할 수 있는 경우 그룹에 따라 각기 다른 준비상태 큐를 사용한다
     - 다단계 피드백 큐 : 다단계 큐 기법에 적응 기법의 개념을 적용한 기법이다.

   ---

   

**3. 임계구역 / 상호 배제 / 세마포어**

- **임계 구역(Critical Section)**

- 1. 하나의 프로세스만 자원 또는 데이터를 사용하도록 지정된 공유 자원(영역)을 의미한다.
  2. 특정 프로세스가 독점할 수 없다.

- **상호 배제(Mutual Exclusion)**

- 1. 여러 프로세스가 동시에 공유 자원을 사용하려 할때 각 프로세스가 번갈아가며 공유 자원을 사용하도록 하는 임계 구역을 유지하는 방법이다.
  2. 상호 배제 기법을 사용함으로써 임계 구역에서 인터럽트, 교착상태, 무한반복이 발생되지 않도록 해야된다.

- **세마포어(Semaphore)**

- 1. 여러 개의 프로세스의 동기화에 사용된다.
  2. 경쟁 자원을 사용하기 전에 임계영역에 진입할 수 있을 때까지 Wait한다.
  3. 임계영역에 진입했을 때 P연산(Wait)으로 경쟁 자원 개수 1 감소
  4. 경쟁 자원을 사용한 후 임계 영역을 빠져나가기 전에 V연산(Signal)으로 경쟁 자원 개수 1 증가

- **모니터 (Monitor)**

- 1. 하나의 프로세스의 동기화에 사용된다.

- **교착상태(Dead Lock)**

- 1. 경쟁 상태에서 다른 프로세스가 점유하고 있는 자원을 사용하기를 무한정 대기하는 상태

  2. 해결기법

  3. 1. 예방기법 : 교착 상태가 발생되지 않도록 시스템을 제어하는 방법으로, 자원의 낭비가 가장 심하다.
     2. 회피 기법 : 은행원 알고리즘
     3. 발견기법자원 할당 그래프 등을 사용한다.
     4. 회복기법 : 할당된 자원을 선점하여 프로세스나 자원을 회복하는 것

**4. 단편화**

- 할당하고 반납하는 과정에서 발생하는 사용하지 않는 작은 조각

- 종류

- 1. 내부 단편화 : 분할된 영역이 할당될 작업의 크기보다 크기 때문에 발생되는 조각
  2. 외부 단편화 : 분할된 영역이 할당될 작업의 크기보다 작기 때문에 발생되는 조각

**5. 가상 기억장치(Virtual Memory)**

- 보조기억장치의 일부를 주기억장치처럼 사용하는 것이다.

- 가상 기억장치 구현 기법

- 1. **페이징(Paging) 기법**

  2. 1. 외부 단편화는 발생하지 않으나 내부 단편화가 발생한다.
     2. 나눠진 프로그램(페이지)를 동일하게 나눠진 주기억장치의 영역에 적재시켜 실행하는 기법이다.
     3. 페이지 맵 테이블이 필요하다.

  3. **세크먼테이션(Segmentation) 기법**

  4. 1. 논리적인 단위로 나눈 후 주기억장치에 적재시켜 실행시키는 기법이다.
     2. 논리적인 크기로 나눈 단위를 세그먼트라고 하며, 각 세그먼트는 고유한 이름과 크기를 갖는다.
     3. 내부 단편화는 발생하지 않으나 외부 단편화가 발생할 수 있다.
     4. 세그먼트 맵 테이블이 피룡하다.
     5. 다른 세그먼트에게 할당된 영역을 침범할 수 없으며, 이를 위해 기억장치 보호키가 필요하다.

**6. 국부성 / 워킹 셋 / 스래싱**

- **국부성(Locality, 구역성)**

- 1. 실행중인 프로세스가 주기억장치를 참조할 때는 일부페이지지만 집중적으로 참조하는 성질이 있다는 이론

  2. 스래싱을 방지하기 위한 워킹 셋 이론의 기반이 된다

  3. 캐시 메모리 시스템의 이론적 근거이다.

  4. 종류

  5. 1. 시간 구역성 : 프로세스가 실행되면서 하나의 페이지를 일정 시간동안 집중적으로 액세스하는 현상
     2. 공간 구역성 : 프로세스 실행 시 일정 위치의 페이지를 집중적으로 액세스하는 현상

- **워킹 셋**

- 1. 프로세스가 일정 시간 동안 자주 참조하는 페이지들의 집합이다.
  2. 구역성(Locality) 특징을 이용한다.
  3. 페이지 부재 및 페이지 교체 현상을 줄인다.

- **스래싱 (Thrashing)**

- 1. 프로세스의 처리 시간보다 페이지 교체 시간이 더 많아지는 현상